<!DOCTYPE html>
<html lang="en-US">
  <head>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/manifest.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#2d89ef"><meta name="msapplication-TileColor" content="#2d89ef"><meta name="theme-color" content="#ffffff"><title>Bluetooth Low Energy | room-assistant</title><meta name="description" content="A companion software to bring your home automation to the room-level for presence detection and more."><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.15">
    <link rel="preload" href="/assets/js/runtime~app.20930980.js" as="script"><link rel="preload" href="/assets/css/styles.9454c94a.css" as="style"><link rel="preload" href="/assets/js/599.de0bb5d4.js" as="script"><link rel="preload" href="/assets/js/app.596760ea.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.9454c94a.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="/room-assistant.png" alt="room-assistant"><span class="site-name can-hide">room-assistant</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/guide/" class="nav-link" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/integrations/" class="nav-link router-link-active" aria-label="Integrations"><!--[--><!--]--> Integrations <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/mKeRix/room-assistant/discussions" rel="noopener noreferrer" target="_blank" aria-label="Forum"><!--[--><!--]--> Forum <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/mKeRix/room-assistant?sponsor=1" rel="noopener noreferrer" target="_blank" aria-label="Sponsor"><!--[--><!--]--> Sponsor <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/mKeRix/room-assistant" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/guide/" class="nav-link" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/integrations/" class="nav-link router-link-active" aria-label="Integrations"><!--[--><!--]--> Integrations <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/mKeRix/room-assistant/discussions" rel="noopener noreferrer" target="_blank" aria-label="Forum"><!--[--><!--]--> Forum <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/mKeRix/room-assistant?sponsor=1" rel="noopener noreferrer" target="_blank" aria-label="Sponsor"><!--[--><!--]--> Sponsor <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/mKeRix/room-assistant" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><section class="sidebar-group"><p class="sidebar-heading active">Integrations</p><ul class=""><li><!--[--><a href="/integrations/" class="nav-link router-link-active sidebar-link" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/integrations/home-assistant.html" class="nav-link sidebar-link" aria-label="Home Assistant Core"><!--[--><!--]--> Home Assistant Core <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/integrations/mqtt.html" class="nav-link sidebar-link" aria-label="MQTT"><!--[--><!--]--> MQTT <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/integrations/bluetooth-low-energy.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-link active" aria-label="Bluetooth Low Energy"><!--[--><!--]--> Bluetooth Low Energy <!--[--><!--]--></a><ul class="sidebar-sub-headers"><li><!--[--><a aria-current="page" href="/integrations/bluetooth-low-energy.html#requirements" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Requirements"><!--[--><!--]--> Requirements <!--[--><!--]--></a><ul class="sidebar-sub-headers"><li><!--[--><a aria-current="page" href="/integrations/bluetooth-low-energy.html#running-with-nodejs" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Running with NodeJS"><!--[--><!--]--> Running with NodeJS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/integrations/bluetooth-low-energy.html#running-with-docker" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Running with Docker"><!--[--><!--]--> Running with Docker <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/integrations/bluetooth-low-energy.html#determining-the-ids" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Determining the IDs"><!--[--><!--]--> Determining the IDs <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/integrations/bluetooth-low-energy.html#tracking-ios-devices" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Tracking iOS Devices"><!--[--><!--]--> Tracking iOS Devices <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/integrations/bluetooth-low-energy.html#settings" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Settings"><!--[--><!--]--> Settings <!--[--><!--]--></a><ul class="sidebar-sub-headers"><li><!--[--><a aria-current="page" href="/integrations/bluetooth-low-energy.html#tag-overrides" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Tag Overrides"><!--[--><!--]--> Tag Overrides <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/integrations/bluetooth-classic.html" class="nav-link sidebar-link" aria-label="Bluetooth Classic"><!--[--><!--]--> Bluetooth Classic <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/integrations/xiaomi-mi.html" class="nav-link sidebar-link" aria-label="Xiaomi Mi Sensors"><!--[--><!--]--> Xiaomi Mi Sensors <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/integrations/omron-d6t.html" class="nav-link sidebar-link" aria-label="Omron D6T"><!--[--><!--]--> Omron D6T <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/integrations/grid-eye.html" class="nav-link sidebar-link" aria-label="Grid-EYE"><!--[--><!--]--> Grid-EYE <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/integrations/gpio.html" class="nav-link sidebar-link" aria-label="GPIO"><!--[--><!--]--> GPIO <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/integrations/shell.html" class="nav-link sidebar-link" aria-label="Shell Commands"><!--[--><!--]--> Shell Commands <!--[--><!--]--></a><!----><!--]--></li></ul></section><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="bluetooth-low-energy"><a class="header-anchor" href="#bluetooth-low-energy">#</a> Bluetooth Low Energy</h1><p><strong>Integration Key:</strong> <code>bluetoothLowEnergy</code></p><p>The Bluetooth Low Energy (BLE) integration scans for advertisement packets that other devices, like iBeacon or Bluetooth tags, emit. You can use any of the many different BLE tags or smart armbands out there, as long as they send out a constant ID. An example would be the <a href="https://store.radiusnetworks.com/collections/all/products/radbeacon-chip" target="_blank" rel="noopener noreferrer">RadBeacon Chip<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> or the <a href="https://www.beaconzone.co.uk/iB001W?search=iB001W" target="_blank" rel="noopener noreferrer">iB001W<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>. You can use Google or your favorite tech hardware store to find many other products like them that would also work.</p><p>The integration calculates an estimated distance in meters for all advertisements it receives and uses that to update the current location of the device. Since there are many factors at play these estimations are not exact measurements, especially once there are obstructions between the BLE device and room-assistant instance. The best accuracy can be achieved with properly configured iBeacons. The distance value is smoothed using a <a href="https://en.wikipedia.org/wiki/Kalman_filter" target="_blank" rel="noopener noreferrer">Kalman filter<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> to limit the impact of measurement noise.</p><h2 id="requirements"><a class="header-anchor" href="#requirements">#</a> Requirements</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Using this together with <a href="./bluetooth-classic">Bluetooth Classic</a> on the same adapter works, but will slightly degrade the performance. If you encounter issues you can try to run to run the integrations from different HCI devices.</p></div><p>This integration requires a BLE capable Bluetooth adapter. Most modern boards like the Raspberry Pi Zero W have an integrated adapter that is suitable. Any Bluetooth USB stick with BLE and Linux support should also work.</p><h3 id="running-with-nodejs"><a class="header-anchor" href="#running-with-nodejs">#</a> Running with NodeJS</h3><p>Apart from that you are also required to have a few more system packages installed:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> bluetooth bluez libbluetooth-dev libudev-dev
<span class="token function">sudo</span> <span class="token function">npm</span> i --global --unsafe-perm room-assistant
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>If you want to run room-assistant without root privileges (as it is recommended) you also need to give NodeJS the correct permissions:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> setcap cap_net_raw+eip <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">eval</span> readlink -f `which node`<span class="token variable">)</span></span>
<span class="token function">sudo</span> setcap cap_net_admin+eip <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">eval</span> readlink -f `which hciconfig`<span class="token variable">)</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="running-with-docker"><a class="header-anchor" href="#running-with-docker">#</a> Running with Docker</h3><p>This integration requires you to run room-assistant in the <code>host</code> network.</p><h2 id="determining-the-ids"><a class="header-anchor" href="#determining-the-ids">#</a> Determining the IDs</h2><p>In order to not clutter your home automation software with the many BLE devices broadcasting their status nearby, room-assistant requires you to set up a allowlist or denylist before it will pass on any information. For regular BLE devices this is the lowercase MAC address without <code>:</code>, for example <code>7750fb4dab70</code> for a peripheral with the MAC address <code>77:50:FB:4D:AB:70</code>. When using iBeacons the ID will be in the format of <code>uuid-major-minor</code>, for example <code>2f234454cf6d4a0fadf2f4911ba9ffa6-1-2</code>.</p><p>If you are unsure what ID your device has you can start room-assistant with the BLE integration enabled, but no allowlist. Devices that are seen for the first time after starting will be logged with their ID to the console.</p><h2 id="tracking-ios-devices"><a class="header-anchor" href="#tracking-ios-devices">#</a> Tracking iOS Devices</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>To use all features that the app offers you should be running room-assistant <strong>v2.17.0</strong> or higher.</p></div><p>You can track iOS devices (iPhones, iPads) with this integration using our companion app. You will need to install the app, open it, grant the requested permissions and then follow the on-screen instructions.</p><p><a href="https://apps.apple.com/us/app/room-assistant/id1538642237?itsct=apps_box_link&amp;itscg=30200" target="_blank" rel="noopener noreferrer"><img src="/assets/img/app-store-badge.8c4986ee.svg" alt="Download on the App Store"><span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>It is recommended to raise the <code>timeout</code> setting to at least <code>60</code> when using the companion app, as the signal may not always be constant.</p><p>You can turn on auto-toggling of this feature in the companion app, which will automatically turn off the trackable information when you are not in reach of any room-assistant instance. This feature requires &quot;always&quot; location permissions to work. It uses beacon advertisements emitted by room-assistant and does not grab your geo-location.</p><details class="custom-container details"><summary>Example Config</summary><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">bluetoothLowEnergy</span><span class="token punctuation">:</span>
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">60</span>
  <span class="token key atrule">allowlist</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&#39;UUID-LIKE-IN-THE-APP&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></details><h2 id="settings"><a class="header-anchor" href="#settings">#</a> Settings</h2><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>allowlist</code></td><td>Array</td><td></td><td>A list of <a href="#determining-the-ids">BLE tag IDs</a> that should be tracked.</td></tr><tr><td><code>allowlistRegex</code></td><td>Boolean</td><td><code>false</code></td><td>Whether the allowlist should be evaluated as a list of <a href="https://en.wikipedia.org/wiki/Regular_expression" target="_blank" rel="noopener noreferrer">regular expressions<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> or not.</td></tr><tr><td><code>denylist</code></td><td>Array</td><td></td><td>A list of <a href="#determining-the-ids">BLE tag IDs</a> that should not be tracked. If an ID matches both allowlist and denylist it will not be tracked.</td></tr><tr><td><code>denylistRegex</code></td><td>Boolean</td><td><code>false</code></td><td>Whether the denylist should be evaluated as a list of <a href="https://en.wikipedia.org/wiki/Regular_expression" target="_blank" rel="noopener noreferrer">regular expressions<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> or not.</td></tr><tr><td><code>processIBeacon</code></td><td>Boolean</td><td><code>true</code></td><td>Whether additional data from iBeacon devices should be taken into account or not. Affects tag IDs and distance estimation.</td></tr><tr><td><code>onlyIBeacon</code></td><td>Boolean</td><td><code>false</code></td><td>Whether only iBeacons should be considered when scanning for devices ot not.</td></tr><tr><td><code>timeout</code></td><td>Number</td><td><code>60</code></td><td>The time after which a recorded distance is considered outdated. This value should be higher than the advertisement frequency of your peripheral.</td></tr><tr><td><code>updateFrequency</code></td><td>Number</td><td><code>0</code></td><td>Minimum amount of seconds that should be waited between distance updates for each tag. The default value disables the throttling.</td></tr><tr><td><code>maxDistance</code></td><td>Number</td><td></td><td>Limits the distance at which a received BLE advertisement is still reported if configured. Value is in meters.</td></tr><tr><td><code>rssiFactor</code></td><td>Number</td><td><code>1</code></td><td>Multiplier for the measured RSSI values. Allows you to fine-tune measurements if you use different Bluetooth adapters across your cluster.</td></tr><tr><td><code>majorMask</code></td><td>Number</td><td><code>0xffff</code></td><td>Filter out bits of the major ID to make dynamic tag IDs with encoded information consistent for filtering.</td></tr><tr><td><code>minorMask</code></td><td>Number</td><td><code>0xffff</code></td><td>Filter out bits of the minor ID to make dynamic tag IDs with encoded information consistent for filtering.</td></tr><tr><td><code>batteryMask</code></td><td>Number</td><td><code>0x00000000</code></td><td>If non-zero, extract the beacon&#39;s battery level from the major/minor fields. The mask operates on a 32bit value with major as the high two bytes and minor as the low two bytes.</td></tr><tr><td><code>tagOverrides</code></td><td><a href="#tag-overrides">Tag Overrides</a></td><td></td><td>Allows you to override some properties of the tracked devices.</td></tr><tr><td><code>hciDeviceId</code></td><td>Number</td><td><code>0</code></td><td>ID of the Bluetooth device to use for the inquiries, e.g. <code>0</code> to use <code>hci0</code>.</td></tr><tr><td><code>instanceBeaconEnabled</code></td><td>Boolean</td><td><code>true</code></td><td>Whether this instance should emit iBeacon advertisements via BLE, which can be used by the room-assistant companion app to auto-toggle advertising.</td></tr><tr><td><code>instanceBeaconMajor</code></td><td>Number</td><td><code>1</code></td><td>The major of the advertised iBeacon.</td></tr><tr><td><code>instanceBeaconMinor</code></td><td>Number</td><td>Random</td><td>The minor of the advertised iBeacon.</td></tr></tbody></table><h3 id="tag-overrides"><a class="header-anchor" href="#tag-overrides">#</a> Tag Overrides</h3><p>The tag overrides object can be considered as a map with the BLE tag ID as key and an object with some of the following settings as value.</p><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>id</code></td><td>String</td><td></td><td>Changes the ID of the device within room-assistant, which is used for entity ID generation. Useful to hide peripheral addresses from publicly shared home automation configurations.</td></tr><tr><td><code>name</code></td><td>String</td><td></td><td>Sets a friendly name for the device, which is sent to the home automation software for easier identification.</td></tr><tr><td><code>measuredPower</code></td><td>Number</td><td></td><td>Overrides the <a href="https://community.estimote.com/hc/en-us/articles/201636913-What-are-Broadcasting-Power-RSSI-and-other-characteristics-of-a-beacon-s-signal-" target="_blank" rel="noopener noreferrer">measured power<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> of a BLE tag, which is used for distance calculation. Should be the expected RSSI when the beacon is exactly 1 meter away from the room-assistant instance.</td></tr><tr><td><code>batteryMask</code></td><td>Number</td><td><code>0x00000000</code></td><td>If non-zero, extract the beacon&#39;s battery level from the major/minor fields. The mask operates on a 32bit value with major as the high two bytes and minor as the low two bytes.</td></tr></tbody></table><details class="custom-container details"><summary>Example Config</summary><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token key atrule">integrations</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> bluetoothLowEnergy
<span class="token key atrule">bluetoothLowEnergy</span><span class="token punctuation">:</span>
  <span class="token key atrule">allowlist</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> 7750fb4dab70
    <span class="token punctuation">-</span> 2f234454cf6d4a0fadf2f4911ba9ffa6<span class="token punctuation">-</span>1<span class="token punctuation">-</span><span class="token number">2</span>
  <span class="token key atrule">maxDistance</span><span class="token punctuation">:</span> <span class="token number">7</span>
  <span class="token key atrule">tagOverrides</span><span class="token punctuation">:</span>
    <span class="token key atrule">7750fb4dab70</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> Cool BLE Tag
      <span class="token key atrule">measuredPower</span><span class="token punctuation">:</span> <span class="token number">-61</span>
      <span class="token key atrule">batteryMask</span><span class="token punctuation">:</span> <span class="token number">0x0000FF00</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></details><details class="custom-container details"><summary>Multiple Bluetooth Integrations Example Config</summary><p><code>hciDeviceId</code> can be used to choose a different Bluetooth adapter than the default one. Use hciconfig from the command line to see all available Bluetooth adapters. This may be useful when using Bluetooth Classic and Bluetooth Low Energy at the same time, as you could then have BLE passive scanning enabled at all times instead of just when no Bluetooth Classic inquiry is running.</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token key atrule">integrations</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> bluetoothClassic
    <span class="token punctuation">-</span> bluetoothLowEnergy
<span class="token key atrule">bluetoothClassic</span><span class="token punctuation">:</span>
  <span class="token key atrule">hciDeviceId</span><span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token key atrule">addresses</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&#39;08:05:90:ed:3b:60&#39;</span>
    <span class="token punctuation">-</span> <span class="token string">&#39;77:50:fb:4d:ab:70&#39;</span>
<span class="token key atrule">bluetoothLowEnergy</span><span class="token punctuation">:</span>
  <span class="token key atrule">hciDeviceId</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">allowlist</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> 7750fb4dab70
    <span class="token punctuation">-</span> 2f234454cf6d4a0fadf2f4911ba9ffa6<span class="token punctuation">-</span>1<span class="token punctuation">-</span><span class="token number">2</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></details><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/mKeRix/room-assistant/edit/main/docs/integrations/bluetooth-low-energy.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">5/30/2021, 4:31:24 PM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/integrations/mqtt.html" class="nav-link" aria-label="MQTT"><!--[--><!--]--> MQTT <!--[--><!--]--></a></span><span class="next"><a href="/integrations/bluetooth-classic.html" class="nav-link" aria-label="Bluetooth Classic"><!--[--><!--]--> Bluetooth Classic <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.20930980.js" defer></script><script src="/assets/js/599.de0bb5d4.js" defer></script><script src="/assets/js/app.596760ea.js" defer></script>
  </body>
</html>
